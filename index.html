<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>모둠별 실시간 활동 현황판</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>모둠별 실시간 활동 현황판</h1>

 <!-- ✨ 새로고침 버튼 추가 -->
  <button id="refreshBtn" style="margin-bottom:16px;">🔄 새로고침</button>

  <div id="groups-container">
    <!-- 기본 입력 칸 하나 -->
    <div class="group-input">
      <input type="text" placeholder="모둠 이름 (예: 탐구조)">
      <button class="remove">×</button>
    </div>
  </div>

  <button id="add-group">+ 모둠 추가</button>
  <button id="create-dashboard">현황판 생성</button>

 <!-- 새로고침 기능 스크립트 -->
  <script>
    document.getElementById('refreshBtn').addEventListener('click', () => {
      // true를 주면 캐시된 리소스 대신 서버에서 다시 불러옵니다
      location.reload(true);
    });
  </script>

  <!-- 입력 페이지 전용 스크립트 -->
  <script>
    // 모둠 추가
    document.getElementById('add-group').onclick = () => {
      const div = document.createElement('div');
      div.className = 'group-input';
      div.innerHTML = `
        <input type="text" placeholder="모둠 이름">
        <button class="remove">×</button>
      `;
      document.getElementById('groups-container').append(div);
      attachRemove(div.querySelector('.remove'));
    };

    // 삭제 버튼에 이벤트 연결
    function attachRemove(btn) {
      btn.onclick = () => btn.parentElement.remove();
    }
    document.querySelectorAll('.remove').forEach(attachRemove);

    // ‘현황판 생성’ 클릭 시 모둠 이름 모아서 dashboard.html로 이동
    document.getElementById('create-dashboard').onclick = () => {
      const names = Array.from(
        document.querySelectorAll('#groups-container input')
      ).map(i => i.value.trim()).filter(v=>v);
      if (!names.length) return alert('모둠 이름을 하나 이상 입력하세요.');
      // URL 파라미터로 전달 (쉼표로 구분)
      const param = encodeURIComponent(names.join(','));
      location.href = `dashboard.html?groups=${param}`;
    };
  </script>
</body>
</html>
